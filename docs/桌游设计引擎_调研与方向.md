# 桌游设计引擎 × AI 模拟/回测 — 调研与方向

> 目标：做一个可结合 AI、方便实现桌游设计、回测等的模拟器。  
> 调研日期：2025-01-29

---

## 一、现有类似项目（简要）

### 1. 偏「设计 + 分析」类

| 项目 | 特点 | 局限 |
|------|------|------|
| **Boardgame-Bookie** (cardboardai) | 概率计算、策略形式化、规则变体、可视化；Python | 体量小、偏玩家向「算概率」 |
| **MeepleLM** (论文/系统) | LLM 当虚拟试玩员，MDA 框架，多 persona 反馈 | 非开源引擎，偏研究 |
| **Monte Carlo in game design** | 骰子/抽牌/战斗等组合概率，减少人工试玩 | 方法论，需自行搭管道 |

### 2. 偏「AI 试玩 / 平衡」类

| 项目 | 特点 | 局限 |
|------|------|------|
| **AI Playtesting** (Slay the Spire) | 设计 → 训练 DRL → AI 试玩 → 统计平衡 | 针对数字卡牌，非通用桌游 |
| **FighterDDA** | 快速大量对局、动态难度与导演 AI 评估 | 偏电子 RPG/战斗 |
| **Assessing Balance using Autonomous Agents** | 用强化学习/自玩评估难度与平衡 | 学术，需自建环境 |

### 3. 通用游戏 / 规则语言

| 项目 | 特点 | 局限 |
|------|------|------|
| **Ludii** | 通用游戏系统，ludeme 描述语言，大量棋类/桌游，内置 AI | Java、偏「已有游戏」游玩与 AI，设计迭代流程不显式 |
| **GDL (Stanford)** | 逻辑式规则描述，通用博弈 | 表达与学习曲线都偏重 |
| **VGDL / PyVGDL** | 2D 电子游戏描述 + Python 模拟 | 面向 2D 电子游戏，非桌游 |

### 4. 桌游「在线玩」平台（非设计引擎）

- **VASSAL**：2D 棋类/战棋推演  
- **Tabletop Club**：3D 物理桌游模拟（Godot）  
- **OpenTabletop**：开源桌游模拟  

这些主要解决「和人一起玩」，不做规则设计、回测、平衡分析。

---

## 二、结论：缺口与机会

- **没有**一个明确以「桌游**设计**」为中心、同时内置「模拟 + 回测 + AI」的通用引擎。  
- 现有要么偏「玩」（VASSAL/Tabletop Club），要么偏「某类电子游戏」（Slay the Spire、VGDL），要么偏「通用博弈」（Ludii/GDL）而设计→回测→AI 的动线不直接。  
- 你当前项目已有：Python 模拟器、批量对局、骰子/卡牌逻辑、平衡调参脚本 —— 很适合作为「桌游设计引擎」的起点。  

**机会点**：做一个「规则/设计优先 + 内置模拟与回测 + AI 友好」的桌游设计引擎，重点服务**设计阶段的迭代**（改规则 → 跑局 → 看数据/听 AI 反馈），而不是替代真人桌游平台。

---

## 三、引擎可采纳的思路

### 1. 规则表达：可执行 + 人可读

- **轻量 DSL 或结构化配置**（JSON/YAML + 少量领域关键词），描述：回合结构、阶段、行动空间、胜负条件、骰子/牌堆/资源公式。  
- 目标：同一份描述既能被**模拟器执行**，又方便给 **LLM 读/写/改**（自然语言 ↔ 规则块）。  
- 可参考：Ludii 的 ludeme 思路（组件化），但语法更贴近桌游设计师习惯；也可参考「用 LLM 把自然语言转成 Python 世界模型」的论文，把「世界模型」做成我们引擎的「规则解释器」。

### 2. 模拟与回测

- **确定性 + 可复现**：种子控制骰子/洗牌，同一规则同一种子得到同一轨迹。  
- **批量跑局**：多局、多参数（人数、初始配置、可选规则），输出对局轨迹与汇总指标（胜率、回合数、关键事件分布等）。  
- **回测**：对「历史规则版本」或「同一规则不同平衡参数」做对比（你现有脚本已在做类似事），引擎层统一：配置 → 跑局 → 指标 → 存储/对比。

### 3. AI 结合方式

- **LLM**  
  - **规则 ↔ 自然语言**：从规则书/设计文档生成/更新 DSL；从 DSL 生成简短规则摘要或 FAQ。  
  - **虚拟试玩员/评审**：把对局摘要 + 规则摘要喂给 LLM，按 persona（策略型/休闲型等）生成反馈（类似 MeepleLM 思路），或生成「平衡性/复杂度」的简短报告。  
  - **迭代建议**：根据回测指标 + LLM 反馈，生成「可考虑的规则/数值改动」列表，再由设计师选择并写回 DSL。  
- **智能体（可选）**  
  - 用简单策略（随机、贪心、规则型）或 MCTS/轻量 RL 做「模拟玩家」，替代部分随机行为，得到更稳定的胜率/时长估计。  
  - 后期若有需要，可接 Ludii 风格的自定义 AI 接口（同一规则多引擎复用）。

### 4. 工作流目标

```
设计(规则/数值) → 引擎解析 → 批量模拟 → 回测/指标
       ↑                              ↓
       └── AI 反馈/建议 ←── 对局摘要 + 指标
```

- 设计师主要改「规则描述」和「平衡参数」；  
- 引擎负责：解析、跑局、算指标、可选地调用 LLM/智能体；  
- 输出：表格/图表 + 可选的自然语言报告，便于快速迭代。

---

## 四、建议的下一步（与现有项目结合）

1. **从你现有模拟器抽一层「规则接口」**  
   - 把「救赎之路」里的回合、阶段、骰子、胜负等抽象成「可配置项」（哪怕先支持一个游戏），形成最小可用的「规则 DSL + 单局模拟」。  

2. **统一回测入口**  
   - 一个脚本/命令：指定规则版本 + 种子范围 + 局数 → 跑完写出一份汇总（胜率、时长、关键指标），便于和后续「规则版本」对比。  

3. **加一个「AI 反馈」模块（最小版）**  
   - 输入：规则摘要 + 若干局的关键数据（例如每局回合数、胜负、某类事件次数）。  
   - 输出：一段简短平衡性/复杂度/可玩性反馈（调用 OpenAI/本地 LLM API 即可）。  

4. **文档与示例**  
   - 在 `docs/` 下保留本调研；  
   - 加一篇「引擎设计目标与术语」（规则、模拟、回测、AI 角色），方便后续扩展和协作。  

这样可以在不推翻现有工作的前提下，逐步长出一个「桌游设计 + 模拟 + 回测 + AI」的小型引擎，并与现有类似项目形成差异化（设计优先、桌游原生、AI 内置）。
