# 《功德轮回：众生百态》v4.4 平衡性测试报告

## 测试概述

- **测试工具**：Python蒙特卡洛模拟器
- **模拟局数**：2000局/配置 × 10个配置 = 20000局
- **测试日期**：2026-01-29
- **测试版本**：v4.4

---

## 一、主要发现

### 1.1 原始规则问题

| 问题 | 严重程度 | 原因分析 |
|------|---------|---------|
| 农夫胜率过高 (59-60%) | ⚠️ 严重 | 发愿条件太简单 + 劳作收益高 |
| 学者胜率过低 (8-10%) | ⚠️ 严重 | 发愿条件太难 + 渡化成本高 |
| 勤劳致福达成率100% | 中等 | 福≥15条件过于宽松 |
| 万世师表达成率12% | 中等 | 福≥15且慧≥22条件过于苛刻 |

### 1.2 不平衡机制分析

通过详细统计每个资源的来源，我们发现：

**农夫福来源过于集中**：
- 发愿奖励：6.0/局（占比23%）
- 布施：9.9/局
- 渡化：4.7/局

**学者慧获取困难**：
- 修行：4.1/局（原配置）
- 发愿：6.0/局
- 总计偏低，难以达成发愿条件

---

## 二、迭代调整过程

### 第一轮迭代（5次调整）

| 迭代 | 调整内容 | 农夫胜率 | 效果 |
|------|---------|---------|------|
| 基线 | 原始规则 | 59.3% | - |
| #2 | 勤劳致福福≥18, 贫女一灯福≥25 | 56.0% | ↓3.3% |
| #3 | 万世师表福≥12,慧≥18 | 48.6% | ↓7.4% |
| #4 | 农夫劳作奖励+0（原+1） | 47.6% | ↓1.0% |
| #5 | 学者修行+2（原+1），僧侣发愿调整 | 43.4% | ↓4.2% |

### 第二轮迭代（5次调整）

| 迭代 | 调整内容 | 农夫胜率 | 学者胜率 |
|------|---------|---------|---------|
| 基线 | 第一轮最终配置 | 36.6% | 18.2% |
| #6 | 勤劳致福福≥20, 贫女一灯福≥28 | 26.0% | 22.8% |
| #7 | 商人布施额外+2福 | 25.8% | 22.1% |
| #8 | 僧侣初始：财0→1, 福3→4 | 25.3% | 20.0% |
| #9 | 学者初始：福1→2, 慧4→5 | 22.2% | 26.0% |
| #10 | 农夫初始：财5→4 | **23.6%** | **25.3%** |

---

## 三、最终推荐配置

### 3.1 职业初始资源调整

| 职业 | 原配置 | 新配置 | 变化 |
|------|--------|--------|------|
| 农夫 | 财5, 福2, 慧2 | **财4**, 福2, 慧2 | 财富-1 |
| 商人 | 财8, 福1, 慧1 | 财8, 福1, 慧1 | 无变化 |
| 学者 | 财3, 福1, 慧4 | 财3, **福2**, **慧5** | 福+1, 慧+1 |
| 僧侣 | 财0, 福3, 慧3 | **财1**, **福4**, 慧3 | 财+1, 福+1 |

### 3.2 发愿条件调整

| 发愿 | 职业 | 原条件 | 新条件 | 达成率变化 |
|------|------|--------|--------|-----------|
| 勤劳致福 | 农夫 | 福≥15 | **福≥20** | 100%→88% |
| 贫女一灯 | 农夫 | 福≥20且财≤5 | **福≥28**且财≤5 | 92%→20% |
| 万世师表 | 学者 | 福≥15且慧≥22 | **福≥12且慧≥18** | 12%→55% |
| 阿罗汉果 | 僧侣 | 慧≥22 | **慧≥18** | 21%→37% |
| 菩萨道 | 僧侣 | 福≥18且渡化≥3 | **福≥15**且渡化≥3 | 30%→58% |

### 3.3 行动收益调整

| 行动 | 职业 | 原配置 | 新配置 |
|------|------|--------|--------|
| 劳作 | 农夫 | +4财富 | **+3财富** |
| 修行 | 学者 | +3慧 | **+4慧** |
| 布施 | 商人 | 额外+1福 | **额外+2福** |

---

## 四、最终平衡结果

### 4.1 职业胜率（目标：均匀分布25%±5%）

| 职业 | 调整前 | 调整后 | 状态 |
|------|--------|--------|------|
| 农夫 | 59.3% | 23.6% | ✅ 平衡 |
| 商人 | 16.7% | 25.5% | ✅ 平衡 |
| 学者 | 9.6% | 25.3% | ✅ 平衡 |
| 僧侣 | 14.4% | 25.6% | ✅ 平衡 |

**结论**：四个职业胜率均在23-26%范围内，差异<3%，达到理想平衡状态。

### 4.2 信仰状态胜率

| 信仰 | 胜率 | 状态 |
|------|------|------|
| 不皈依 | 26.4% | ✅ 合理 |
| 小乘 | 38.0% | ✅ 略高（合理） |
| 大乘 | 35.6% | ✅ 高风险高回报 |

### 4.3 发愿达成率（目标：简单70-90%，困难30-60%）

| 发愿 | 类型 | 达成率 | 状态 |
|------|------|--------|------|
| 勤劳致福 | 简单 | 88.3% | ✅ 合理 |
| 财施功德 | 简单 | 82.6% | ✅ 合理 |
| 大商人之心 | 困难 | 59.8% | ✅ 合理 |
| 菩萨道 | 困难 | 58.4% | ✅ 合理 |
| 万世师表 | 困难 | 55.0% | ✅ 合理 |
| 阿罗汉果 | 困难 | 37.3% | ✅ 合理 |
| 传道授业 | 困难 | 28.4% | ⚠️ 略难 |
| 贫女一灯 | 困难 | 19.8% | ⚠️ 较难 |

### 4.4 团队胜率

- **调整后**：95.6%
- **评估**：略高，可考虑适当增加难度

---

## 五、规则书修改建议

### 需要更新的章节

1. **§2.1 职业卡** - 更新初始资源表
2. **§3.3 行动详解** - 更新劳作/修行/布施收益
3. **§6.1 发愿卡列表** - 更新发愿条件

### 具体修改对照

#### 初始资源表（原）
```
| 职业 | 财富 | 福 | 慧 |
|------|-----|---|---|
| 农夫 | 5   | 2 | 2 |
| 商人 | 8   | 1 | 1 |
| 学者 | 3   | 1 | 4 |
| 僧侣 | 0   | 3 | 3 |
```

#### 初始资源表（新）
```
| 职业 | 财富 | 福 | 慧 |
|------|-----|---|---|
| 农夫 | 4   | 2 | 2 |
| 商人 | 8   | 1 | 1 |
| 学者 | 3   | 2 | 5 |
| 僧侣 | 1   | 4 | 3 |
```

---

## 六、附录

### 测试文件

- `simulator_v44.py` - 基础模拟器
- `simulator_v44_enhanced.py` - 增强版模拟器（详细统计）
- `balance_test_v2.py` - 第二轮迭代测试
- `balance_config_v2.json` - 最终推荐配置
- `balance_iterations.json` - 完整迭代记录

### 后续测试建议

1. **真人测试**：模拟器使用简化AI策略，真人玩家可能有不同表现
2. **极端组合测试**：如"农夫+大乘+贫女一灯"等特定组合
3. **团队胜率调整**：如需降低胜率，可增加劫难每回合+2
4. **发愿传道授业**：考虑降低条件到慧≥16

---

**报告生成时间**：2026-01-29
**版本**：v4.4 平衡补丁
