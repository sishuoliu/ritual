# 桌游项目 · 开发说明

面向后续开发与 GitHub 协作的简要说明。

---

## 一、功德轮回（v3.6）开发流程

### 1. 代码与配置

- **主目录**：`模拟测试/`
- **模拟器**：`game_simulator_v3.5_final.py`（默认事件已为 v3.6）
- **回测**：`backtest_system.py`（BacktestConfig、run_full_backtest、事件卡工厂等）
- **调优**：`balance_tuning_v36.py`（多方案对比，输出推荐方案与 tuning_results_v36.json）

### 2. 修改平衡或规则时

1. 在 `模拟测试/` 中修改事件表、众生卡、`save_required`、发愿等（或通过 backtest 注入）。
2. 运行回测/调优：
   - 推荐从**仓库根目录**执行：`python run_merit_cycle_tuning.py`（避免中文路径问题）。
   - 或进入 `桌游/模拟测试` 后执行：`python balance_tuning_v36.py`。
3. 根据结果更新：
   - `设计提案/功德轮回_规则说明书_v3.6.txt`（玩家规则）
   - `设计提案/功德轮回_v3.6_最终版_回测与平衡报告.txt`（设计目标与实测摘要）。

### 3. 依赖

- Python 3.7+，仅用标准库（random、math、dataclasses、typing 等），无第三方依赖。
- 回测与调优无需安装额外包。

---

## 二、救赎之路

- **终版规则与制作包**：`终版/救赎之路-*`
- **规则变体**：`05_游戏规则/`
- **模拟器**（若存在）：`01_代码_模拟器/`
- **测试数据**：`04_测试数据/`

---

## 三、上传 GitHub

### 1. 首次推送

```bash
cd /path/to/ritul
git init
git add .
git commit -m "Initial: 桌游项目与功德轮回 v3.6 模拟/回测"
git remote add origin https://github.com/<你的用户名>/<仓库名>.git
git branch -M main
git push -u origin main
```

### 2. 建议忽略（已写入根目录 .gitignore）

- `__pycache__/`、`*.pyc`、`*.log`
- `tuning_results*.json`（调优生成，可按需保留或提交示例）
- `.vscode/`、`.idea/`
- 系统与临时文件

### 3. 中文路径与运行

- 仓库中含中文路径（如 `桌游/模拟测试`），Git 可正常克隆；在部分终端下显示可能异常，不影响使用。
- 运行功德轮回调优建议用根目录的 `run_merit_cycle_tuning.py`，由 Python 内部切换工作目录，避免 shell 对中文路径的处理问题。

### 4. 提交建议

- 规则或平衡变更：同时提交 `模拟测试/` 中相关代码与 `设计提案/` 中对应规则书或报告。
- 大文件（如 PDF）：若需保留在仓库，请勿在 .gitignore 中排除；若希望瘦身，可仅保留必要文献或使用 Git LFS。

---

## 四、目录速查

| 用途           | 路径 |
|----------------|------|
| 功德轮回规则   | `设计提案/功德轮回_规则说明书_v3.6.txt` |
| 功德轮回回测说明 | `模拟测试/README_回测与v3.6.md` |
| 功德轮回模拟器 | `模拟测试/game_simulator_v3.5_final.py` |
| 调优启动器     | 仓库根目录 `run_merit_cycle_tuning.py` |
| 救赎之路终版   | `终版/救赎之路-简易版|骰子版|转职版/` |
| 文件结构说明   | `文件整理说明.txt` |

---

*最后更新：2026-01-28*
